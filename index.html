<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Hotel Booking with Interactive Calendar & Pricing</title>
    <style>
        /* --- Basic Styles & Fonts --- */
        :root {
            --primary-color: #007bff;
            --secondary-color: #f8f9fa;
            --text-color: #333;
            --border-color: #dee2e6;
            --success-color: #28a745;
            --card-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            background-color: #f4f7f9;
            color: var(--text-color);
            line-height: 1.6;
        }

        /* --- Main Container --- */
        .container {
            max-width: 1100px;
            margin: 20px auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }

        /* --- Header --- */
        .header {
            grid-column: 1 / -1;
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .header h1 {
            margin: 0;
            color: var(--primary-color);
        }

        /* --- Booking Form --- */
        .booking-form {
            grid-column: 1 / -1;
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--card-shadow);
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            flex-grow: 1;
        }

        .form-group label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 5px;
        }

        .form-group input {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 1em;
        }
        
        #date-picker-trigger {
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 1em;
            cursor: pointer;
            background-color: #fff;
            text-align: left;
            flex-grow: 2;
        }

        #date-picker-trigger:hover {
            border-color: #999;
        }

        /* --- Calendar Modal --- */
        .calendar-modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; }
        .calendar-container { background-color: #fff; border-radius: 8px; padding: 20px; width: 90%; max-width: 650px; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .calendar-header button { background: none; border: none; font-size: 1.5em; cursor: pointer; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 5px; text-align: center; }
        .calendar-day-name { font-weight: bold; font-size: 0.8em; color: #666; }
        .calendar-day { padding: 8px 0; cursor: pointer; border-radius: 50%; transition: background-color 0.2s, color 0.2s; }
        .calendar-day:hover { background-color: var(--secondary-color); }
        .calendar-day.other-month { color: #ccc; cursor: not-allowed; }
        .calendar-day.disabled { color: #ccc; cursor: not-allowed; text-decoration: line-through; }
        .calendar-day.today { font-weight: bold; border: 1px solid var(--primary-color); }
        .calendar-day.selected-start, .calendar-day.selected-end { background-color: var(--primary-color); color: #fff; }
        .calendar-day.in-range { background-color: #e0efff; border-radius: 0; }
        
        /* --- NEW: Calendar Price Badge --- */
        .calendar-price-badge {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .calendar-footer { display: flex; justify-content: flex-end; margin-top: 20px; }

        /* --- Room Listings --- */
        .rooms-list { display: flex; flex-direction: column; gap: 20px; }
        .room-card { background-color: #fff; border-radius: 8px; box-shadow: var(--card-shadow); overflow: hidden; display: flex; }
        .room-card img { width: 200px; height: 100%; object-fit: cover; }
        .room-details { padding: 20px; flex-grow: 1; }
        .room-details h3 { margin-top: 0; }
        .room-amenities { font-size: 0.9em; color: #555; margin: 10px 0; }
        .room-price { font-size: 1.5em; font-weight: bold; color: var(--primary-color); }
        .room-price span { font-size: 0.7em; font-weight: normal; color: #666; }

        /* --- Buttons --- */
        .btn { background-color: var(--primary-color); color: #fff; border: none; padding: 10px 15px; border-radius: 5px; cursor: pointer; font-size: 1em; transition: background-color 0.2s; text-align: center; }
        .btn:hover { background-color: #0056b3; }
        .btn-select { margin-top: 15px; }
        .btn-confirm { width: 100%; padding: 12px; font-size: 1.1em; background-color: var(--success-color); }
        .btn-confirm:hover { background-color: #218838; }

        /* --- Booking Summary --- */
        .booking-summary { background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: var(--card-shadow); position: sticky; top: 20px; height: fit-content; }
        .booking-summary h2 { margin-top: 0; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; text-align: center; }
        #summary-content { margin-bottom: 20px; }
        .summary-line { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .summary-total { border-top: 2px solid var(--border-color); padding-top: 15px; margin-top: 15px; font-size: 1.2em; font-weight: bold; }
        #empty-summary { color: #888; text-align: center; }

        /* --- Responsive Design --- */
        @media (max-width: 900px) {
            .container { grid-template-columns: 1fr; }
            .room-card { flex-direction: column; }
            .room-card img { width: 100%; height: 180px; }
            .booking-summary { position: static; }
        }
        
        @media (max-width: 600px) {
            .booking-form { flex-direction: column; align-items: stretch; }
        }
    </style>
</head>
<body>

    <div class="container">
        <header class="header">
            <h1>Gemini Hotel & Suites</h1>
            <p>Your perfect getaway starts here. Best prices guaranteed.</p>
        </header>

        <div id="booking-form" class="booking-form">
            <div class="form-group">
                <label for="date-picker-trigger">Check-in / Check-out</label>
                <div id="date-picker-trigger">Select Dates</div>
            </div>
            <div class="form-group">
                <label for="guests">Guests</label>
                <input type="number" id="guests" value="2" min="1" max="10" required>
            </div>
        </div>

        <main class="rooms-list">
            <div class="room-card"><img src="https://placehold.co/400x400/007bff/ffffff?text=Deluxe+Queen" alt="Deluxe Queen Room"><div class="room-details"><h3>Deluxe Queen Room</h3><p class="room-amenities">Free WiFi • Air Conditioning • 42" TV</p><p>A comfortable and spacious room with two queen beds, perfect for families or groups.</p><div class="room-price">$120 <span>/ night</span></div><button class="btn btn-select" data-room-name="Deluxe Queen Room" data-room-price="120">Select Room</button></div></div>
            <div class="room-card"><img src="https://placehold.co/400x400/28a745/ffffff?text=King+Suite" alt="King Suite"><div class="room-details"><h3>Executive King Suite</h3><p class="room-amenities">Free WiFi • Soaking Tub • Mini Fridge • Balcony</p><p>Enjoy luxury and space in our suite featuring a king bed and a separate living area.</p><div class="room-price">$180 <span>/ night</span></div><button class="btn btn-select" data-room-name="Executive King Suite" data-room-price="180">Select Room</button></div></div>
            <div class="room-card"><img src="https://placehold.co/400x400/ffc107/333333?text=Standard" alt="Standard Room"><div class="room-details"><h3>Standard Double</h3><p class="room-amenities">Free WiFi • Air Conditioning</p><p>A cozy and affordable room with a comfortable double bed, ideal for solo travelers.</p><div class="room-price">$95 <span>/ night</span></div><button class="btn btn-select" data-room-name="Standard Double" data-room-price="95">Select Room</button></div></div>
        </main>

        <aside class="booking-summary">
            <h2>Your Booking</h2>
            <div id="summary-content" style="display: none;"><div class="summary-line"><span>Room:</span><strong id="summary-room-name"></strong></div><div class="summary-line"><span>Dates:</span><strong id="summary-dates"></strong></div><div class="summary-line"><span>Nights:</span><strong id="summary-nights"></strong></div><div class="summary-line"><span>Subtotal:</span><strong id="summary-subtotal"></strong></div><div class="summary-line"><span>Taxes (10%):</span><strong id="summary-taxes"></strong></div><div class="summary-line summary-total"><span>Total:</span><strong id="summary-total"></strong></div><button id="confirm-booking-btn" class="btn btn-confirm">Confirm Booking</button></div>
            <div id="empty-summary"><p>Select your dates and a room to see your booking summary.</p></div>
        </aside>
    </div>

    <div id="calendar-modal" class="calendar-modal">
        <div class="calendar-container">
            <div class="calendar-header">
                <button id="prev-month-btn">&lt;</button>
                <h3 id="current-month-year"></h3>
                <button id="next-month-btn">&gt;</button>
            </div>
            <div class="calendar-grid">
                <div class="calendar-day-name">Sun</div><div class="calendar-day-name">Mon</div><div class="calendar-day-name">Tue</div><div class="calendar-day-name">Wed</div><div class="calendar-day-name">Thu</div><div class="calendar-day-name">Fri</div><div class="calendar-day-name">Sat</div>
            </div>
            <div id="calendar-days-grid" class="calendar-grid"></div>
            
            <div id="calendar-price-badge" class="calendar-price-badge"></div>
            
            <div class="calendar-footer">
                <button id="calendar-done-btn" class="btn">Done</button>
            </div>
        </div>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- PRICING BADGE SETTINGS (from user script) ---
            const NIGHTLY = 70;
            const WEEKLY = 299;
            const MONTHLY = 1099;
            const WEEK_N = +(WEEKLY / 7).toFixed(2);
            const MIN_NIGHTS_FOR_DEAL = 7;
            const MONTHLY_NIGHTS_THRESHOLD = 30;

            // --- State Variables ---
            let checkinDate = null;
            let checkoutDate = null;
            let currentDate = new Date();
            currentDate.setDate(1);

            // --- Element References ---
            const datePickerTrigger = document.getElementById('date-picker-trigger');
            const selectRoomButtons = document.querySelectorAll('.btn-select');
            
            // Summary Elements
            const summaryContent = document.getElementById('summary-content');
            const emptySummary = document.getElementById('empty-summary');
            const summaryRoomName = document.getElementById('summary-room-name');
            const summaryDates = document.getElementById('summary-dates');
            const summaryNights = document.getElementById('summary-nights');
            const summarySubtotal = document.getElementById('summary-subtotal');
            const summaryTaxes = document.getElementById('summary-taxes');
            const summaryTotal = document.getElementById('summary-total');
            const confirmBookingBtn = document.getElementById('confirm-booking-btn');

            // Calendar Modal Elements
            const calendarModal = document.getElementById('calendar-modal');
            const monthYearDisplay = document.getElementById('current-month-year');
            const daysGrid = document.getElementById('calendar-days-grid');
            const prevMonthBtn = document.getElementById('prev-month-btn');
            const nextMonthBtn = document.getElementById('next-month-btn');
            const calendarDoneBtn = document.getElementById('calendar-done-btn');
            const calendarPriceBadge = document.getElementById('calendar-price-badge'); // New badge container

            // --- Initial Setup ---
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            checkinDate = today;
            checkoutDate = tomorrow;
            updateDateTriggerDisplay();

            // --- Event Listeners ---
            datePickerTrigger.addEventListener('click', openCalendar);
            prevMonthBtn.addEventListener('click', () => changeMonth(-1));
            nextMonthBtn.addEventListener('click', () => changeMonth(1));
            calendarDoneBtn.addEventListener('click', closeCalendar);
            calendarModal.addEventListener('click', (e) => {
                 if(e.target === calendarModal) closeCalendar();
            });

            // --- PRICING BADGE HELPERS (adapted from user script) ---
            const nightsBetween = (a, b) => Math.round((b - a) / (1000 * 60 * 60 * 24));

            function buildDealBadge(nights) {
                let discountedTotalRem = nights;
                let discountedTotal = 0;
                discountedTotal += Math.floor(discountedTotalRem / MONTHLY_NIGHTS_THRESHOLD) * MONTHLY;
                discountedTotalRem %= MONTHLY_NIGHTS_THRESHOLD;
                discountedTotal += Math.floor(discountedTotalRem / 7) * WEEKLY;
                discountedTotalRem %= 7;
                discountedTotal += discountedTotalRem * WEEK_N;
                discountedTotal = +discountedTotal.toFixed(2);

                const originalTotal = (nights * NIGHTLY).toFixed(2);
                const half = (discountedTotal / 2).toFixed(2);

                const div = document.createElement('div');
                div.style.cssText = 'padding:12px; background:#f8f9fa; text-align:center; font-size:16px; line-height:1.4; border-radius: 6px;';
                div.innerHTML = `
                  <div style="font-size:14px; color:#888; margin-bottom: 5px;">Original Price: <del>$${originalTotal}</del></div>
                  <div style="font-size:18px; font-weight:bold; color:#333;">Discounted Total: $${discountedTotal.toFixed(2)}</div>
                  <div style="font-size:24px; font-weight:bold; color:var(--success-color); margin-top:10px;">
                    Pay only $${half} today
                  </div>`;
                return div;
            }

            function buildInfoMessage() {
                const div = document.createElement('div');
                div.style.cssText = 'padding: 8px 12px; text-align: center; color: #555; font-size: 14px; line-height: 1.3;';
                div.innerHTML = `<strong style="color: var(--primary-color);">Select 7+ nights to unlock weekly and monthly discounts!</strong>`;
                return div;
            }
            
            // --- NEW CORE LOGIC FUNCTION ---
            function updateCalendarBadge() {
                calendarPriceBadge.innerHTML = '';
                let nights = 0;
                if (checkinDate && checkoutDate) {
                    nights = nightsBetween(checkinDate, checkoutDate);
                }

                if (nights >= MIN_NIGHTS_FOR_DEAL) {
                    calendarPriceBadge.appendChild(buildDealBadge(nights));
                } else {
                    calendarPriceBadge.appendChild(buildInfoMessage());
                }
            }
            
            // --- MAIN CALENDAR FUNCTIONS ---
            function openCalendar() {
                calendarModal.style.display = 'flex';
                renderCalendar();
                updateCalendarBadge(); // Update badge on open
            }

            function closeCalendar() {
                calendarModal.style.display = 'none';
            }

            function changeMonth(direction) {
                currentDate.setMonth(currentDate.getMonth() + direction);
                renderCalendar();
            }

            function renderCalendar() {
                daysGrid.innerHTML = '';
                const year = currentDate.getFullYear();
                const month = currentDate.getMonth();
                monthYearDisplay.textContent = `${currentDate.toLocaleString('default', { month: 'long' })} ${year}`;

                const firstDayOfMonth = new Date(year, month, 1).getDay();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const today = new Date();
                today.setHours(0,0,0,0);

                for (let i = 0; i < firstDayOfMonth; i++) {
                    daysGrid.insertAdjacentHTML('beforeend', '<div class="calendar-day other-month"></div>');
                }

                for (let i = 1; i <= daysInMonth; i++) {
                    const day = new Date(year, month, i);
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    dayElement.textContent = i;
                    dayElement.dataset.date = day.toISOString();

                    if (day < today) dayElement.classList.add('disabled');
                    if (day.getTime() === today.getTime()) dayElement.classList.add('today');
                    if (checkinDate && day.getTime() === new Date(checkinDate).setHours(0,0,0,0)) dayElement.classList.add('selected-start');
                    if (checkoutDate && day.getTime() === new Date(checkoutDate).setHours(0,0,0,0)) dayElement.classList.add('selected-end');
                    if (checkinDate && checkoutDate && day > checkinDate && day < checkoutDate) dayElement.classList.add('in-range');
                    
                    if (!dayElement.classList.contains('disabled')) {
                       dayElement.addEventListener('click', handleDateClick);
                    }
                    daysGrid.appendChild(dayElement);
                }
            }
            
            function handleDateClick(e) {
                const selectedDate = new Date(e.target.dataset.date);

                if (!checkinDate || (checkinDate && checkoutDate)) {
                    checkinDate = selectedDate;
                    checkoutDate = null;
                } else if (selectedDate > checkinDate) {
                    checkoutDate = selectedDate;
                } else {
                    checkinDate = selectedDate;
                    checkoutDate = null;
                }
                
                renderCalendar();
                updateDateTriggerDisplay();
                updateCalendarBadge(); // Update badge on every click
            }

            function updateDateTriggerDisplay() {
                 const options = { month: 'short', day: 'numeric', year: 'numeric' };
                 if (checkinDate && checkoutDate) {
                     datePickerTrigger.textContent = `${checkinDate.toLocaleDateString(undefined, options)} - ${checkoutDate.toLocaleDateString(undefined, options)}`;
                 } else if (checkinDate) {
                     datePickerTrigger.textContent = `${checkinDate.toLocaleDateString(undefined, options)} - Select checkout date`;
                 } else {
                     datePickerTrigger.textContent = 'Select Dates';
                 }
            }

            // --- Booking Logic (Connects to the rest of the page) ---
            selectRoomButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const roomName = button.dataset.roomName;
                    const roomPrice = parseFloat(button.dataset.roomPrice);

                    if (!checkinDate || !checkoutDate) {
                        alert('Please select your check-in and check-out dates.');
                        openCalendar();
                        return;
                    }

                    const nights = nightsBetween(checkinDate, checkoutDate);
                    if (nights <= 0) return;

                    const subtotal = nights * roomPrice;
                    const taxes = subtotal * 0.10;
                    const total = subtotal + taxes;

                    const options = { month: 'short', day: 'numeric' };
                    summaryRoomName.textContent = roomName;
                    summaryDates.textContent = `${checkinDate.toLocaleDateString(undefined, options)} - ${checkoutDate.toLocaleDateString(undefined, options)}`;
                    summaryNights.textContent = nights;
                    summarySubtotal.textContent = `$${subtotal.toFixed(2)}`;
                    summaryTaxes.textContent = `$${taxes.toFixed(2)}`;
                    summaryTotal.textContent = `$${total.toFixed(2)}`;
                    
                    summaryContent.style.display = 'block';
                    emptySummary.style.display = 'none';
                });
            });
            
            confirmBookingBtn.addEventListener('click', () => {
                const total = summaryTotal.textContent;
                alert(`Thank you for your booking! Your total is ${total}. A confirmation email has been sent.`);
                summaryContent.style.display = 'none';
                emptySummary.style.display = 'block';
            });
        });
    </script>
</body>
</html>